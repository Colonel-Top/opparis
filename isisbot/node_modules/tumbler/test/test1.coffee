tumbler = require "tumbler"
path = require "path"

TEST1_DIR =  path.join __dirname, "test1"
TEST1_CSS = path.join TEST1_DIR,"test1.css"
TEST1_JS = path.join TEST1_DIR,"test1.js"
TEST1_STATIC_JS = path.join TEST1_DIR,"test1.static.js"
TEST1_BUNDLE_JS = path.join TEST1_DIR,"concatenation.js"

builder = new tumbler.Builder()
builder.register_compiler new tumbler.BundleCompiler()
builder.register_compiler new tumbler.SimpleCompiler 'coffee', 'js', 'coffee', ['-p']
builder.register_compiler new tumbler.SimpleCompiler 'less', 'css', 'less',[]
builder.register_compiler new tumbler.TrivialCompiler()

success = -> console.log "ok"
failure = (msg)-> console.log "error : " + msg

#builder.build TEST1_JS,success,failure
#builder.build TEST1_CSS,success,failure
#builder.build TEST1_STATIC_JS,success,failure
builder.build TEST1_BUNDLE_JS,success,failure